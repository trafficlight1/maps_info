<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Lviv 3D Map Visualization</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
    <style>
        body { margin: 0; padding: 0; background-color: #000; font-family: 'Helvetica Neue', Arial, sans-serif; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; z-index: 1; }
        
        /* --- НАВІГАЦІЯ (NAVBAR) --- */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 80px;
            background-color: #000;
            display: flex;
            align-items: center;
            padding: 0 40px;
            box-sizing: border-box;
            z-index: 100;
        }

        .nav-links a, .nav-lang a, .nav-logo {
            color: #fff;
            text-decoration: none;
            text-transform: uppercase;
            font-size: 14px;
            letter-spacing: 1px;
            transition: opacity 0.3s;
        }

        .nav-links a:hover, .nav-lang a:hover, .nav-logo:hover {
            opacity: 0.7;
        }

        /* Стилі для картинки логотипу */
        /* --- ЛОГОТИПИ --- */
        .logo-img {
            height: 40px; 
            width: auto;  
            margin-right: 15px; 
            display: block;
        }

        /* Логіка перемикання: за замовчуванням (для ПК) */
        .logo-mobile { display: none; } 
        .logo-desktop { display: block; }

        .logo-text {
            font-weight: bold;
            vertical-align: middle;
            line-height: 1.2;
            display: inline-block;
            max-width: 100px; 
            font-size: 12px;
        }

        .nav-group-links {
            display: flex;
            gap: 30px;
        }

        .nav-logo-container {
            display: flex;
            position: center; 
        }

        /* --- АДАПТИВНІСТЬ NAVBAR --- */

        /* ПК (> 768px) */
        @media (min-width: 769px) {
            .navbar {
                justify-content: space-between;
            }
            .nav-group-links { order: 1; }
            .nav-logo-container { order: 2; margin-left: 0; margin-right: 200px; }
            .nav-lang { order: 3; }
        }

        /* МОБІЛЬНА ВЕРСІЯ (< 768px) */
        @media (max-width: 768px) {
            .navbar {
                height: 70px;
                padding: 0 20px;
                position: relative; 
            }

            .nav-logo-container { 
                position: relative;
                z-index: 2;
            }

            /* На мобільному прибираємо відступ картинки, бо тексту поруч немає */
            .logo-img {
                margin-right: 0;
                height: 35px; /* Трохи менший логотип на телефоні */
            }

            .nav-group-links {
                position: absolute;
                left: 58%;
                top: 52%;
                transform: translate(-50%, -50%);
                gap: 24px;
                width: 100%;
                justify-content: center;
                z-index: 1;
            }
            
            .nav-links a {
                font-size: 14px;
                font-weight: 500;
                letter-spacing: 0.5px;
            }
            
            .nav-lang { display: none; }
            .logo-desktop { display: none !important; } /* Ховаємо ПК версію */
            .logo-mobile { display: block !important; } /* Показуємо мобільну */

            .logo-img {
                margin-right: 0; /* Прибираємо відступ */
                height: 35px;    /* Розмір для телефону */
            }
        }

        /* --- КНОПКИ КЕРУВАННЯ --- */
        .controls {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px 25px;
            border-radius: 50px;
            border: 1px solid #333;
            z-index: 10;
            max-width: 90%; 
            box-sizing: border-box;
            justify-content: center;
        }

        .layer-btn {
            background: transparent;
            border: 1px solid #555;
            color: #fff;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .layer-btn:hover {
            border-color: #fff;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .layer-btn.active {
            background: #fff;
            color: #000;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }

        @media (max-width: 768px) {
            .controls {
                bottom: 30px;
                padding: 10px 15px;
                gap: 8px;
                width: 95%;
            }
            .layer-btn {
                padding: 8px 12px;
                font-size: 11px;
                letter-spacing: 0.5px;
                flex: 1;
                text-align: center;
            }
        }
    </style>
</head>
<body>

<nav class="navbar">
    <div class="nav-group-links nav-links">
        <a href="https://pidsvitu.com/history">ІСТОРІЯ</a>
        <a href="https://pidsvitu.com/future">РОЗВИТОК</a>
        <a href="https://pidsvitu.com/about">ДЕТАЛЬНІШЕ</a>
    </div>

    <a href="https://pidsvitu.com" class="nav-logo-container nav-logo">
        
        <img src="./logo.png" alt="Логотип" class="logo-img logo-desktop">
        
        <img src="./logo2.png" alt="Логотип" class="logo-img logo-mobile">
    </a>

    <div class="nav-lang">
        <a href="#">UA/EN</a>
    </div>
</nav>

<div id="map"></div>

<div class="controls">
    <button class="layer-btn" onclick="elevateLayer('parks')">Парки</button>
    <button class="layer-btn" onclick="elevateLayer('streets')">Магістралі</button>
    <button class="layer-btn" onclick="elevateLayer('housing')">Історичний</button>
</div>


<script>
    mapboxgl.accessToken = 'pk.eyJ1IjoibHZpdiIsImEiOiJjbWl4MXQ0dG4wMmRoM2VzNzZvMzlmODVmIn0.FpjKdCBZR8neb-2imEu-xA';

    const isMobile = window.innerWidth < 768;

    const config = {
        zoom: isMobile ? 11 : 13.2,
        pitch: isMobile ? 30 : 45,
        roadWidth: isMobile ? 1.5 : 4,
        roadWidthActive: isMobile ? 3 : 6
    };

    const map = new mapboxgl.Map({
        container: 'map',
        style: {
            "version": 8,
            "name": "Dark Empty",
            "sources": {},
            "layers": [
                {
                    "id": "background",
                    "type": "background",
                    "paint": { "background-color": "#000" }
                }
            ]
        },
        center: [24.0311, 49.8329], 
        zoom: config.zoom,
        pitch: config.pitch,
        bearing: 0,
        antialias: true,
        preserveDrawingBuffer: true,
        interactive: true
    });

    map.on('load', () => {
        
        map.addSource('parks-source', {
            type: 'geojson',
            data: './park.geojson' 
        });

        map.addLayer({
            'id': 'parks-layer',
            'type': 'fill-extrusion',
            'source': 'parks-source',
            'paint': {
                'fill-extrusion-color': '#00e676',
                'fill-extrusion-height': 10, 
                'fill-extrusion-base': 0,   
                'fill-extrusion-opacity': 0.8
            }
        });

        map.addSource('streets-source', {
            type: 'geojson',
            data: './roads.json.geojson'
        });

        map.addLayer({
            'id': 'streets-layer',
            'type': 'line', 
            'source': 'streets-source',
            'paint': {
                'line-color': '#42a5f5',
                'line-width': config.roadWidth,
                'line-opacity': 0.9
            }
        });

        map.addSource('buildings-source', {
            type: 'geojson',
            data: './historical1.geojson'
        });

        map.addLayer({
            'id': 'buildings-layer',
            'type': 'fill-extrusion',
            'source': 'buildings-source',
            'paint': {
                'fill-extrusion-color': '#FFB74D',
                'fill-extrusion-height': ['get', 'height'], 
                'fill-extrusion-base': 0,
                'fill-extrusion-opacity': 0.9
            }
        });


        map.setLight({
            anchor: 'viewport',
            color: 'white',
            intensity: 0.5,
            position: [1.15, 210, 30]
        });
    });

    function elevateLayer(layerName) {
        resetLayers();
        
        if (layerName === 'parks') {
            map.setPaintProperty('parks-layer', 'fill-extrusion-base', 0);
            map.setPaintProperty('parks-layer', 'fill-extrusion-height', 80); 
            setActiveButton(0);
        } 
        else if (layerName === 'streets') {
            map.setPaintProperty('streets-layer', 'line-color', '#fff');
            map.setPaintProperty('streets-layer', 'line-width', config.roadWidthActive);
            setActiveButton(1);
        } 
        else if (layerName === 'housing') {
            map.setPaintProperty('buildings-layer', 'fill-extrusion-base', 0);
            map.setPaintProperty('buildings-layer', 'fill-extrusion-height', 50);
            setActiveButton(2);
        }
    }



    function setActiveButton(index) {
        const buttons = document.querySelectorAll('.layer-btn');
        buttons[index].classList.add('active');
    }

</script>

</body>
</html>
